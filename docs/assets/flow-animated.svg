<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 100" width="800" height="100">
  <style>
    @media (prefers-color-scheme: dark) {
      .box-bg { fill: #1e293b; }
      .box-text { fill: #f1f5f9; }
    }
    @media (prefers-color-scheme: light) {
      .box-bg { fill: #f1f5f9; }
      .box-text { fill: #1e293b; }
    }
    .box-bg { fill: #1e293b; }
    .box-text { fill: #f1f5f9; }
  </style>

  <defs>
    <linearGradient id="flowGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ef4444"/>
      <stop offset="25%" style="stop-color:#f97316"/>
      <stop offset="50%" style="stop-color:#06b6d4"/>
      <stop offset="75%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#22c55e"/>
    </linearGradient>
    <filter id="boxGlow">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowFlow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L0,8 L8,4 z" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Step 1: Request -->
  <g transform="translate(30, 25)" filter="url(#boxGlow)">
    <rect width="120" height="50" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
    <text x="60" y="22" text-anchor="middle" font-family="system-ui" font-size="10" fill="#ef4444" font-weight="600">REQUEST</text>
    <text x="60" y="38" text-anchor="middle" font-family="monospace" font-size="9" fill="#b91c1c">GET /api</text>
  </g>

  <!-- Arrow 1 -->
  <g>
    <line x1="155" y1="50" x2="195" y2="50" stroke="#64748b" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowFlow)">
      <animate attributeName="stroke-dashoffset" values="18;0" dur="1s" repeatCount="indefinite"/>
    </line>
  </g>

  <!-- Step 2: Pool -->
  <g transform="translate(200, 25)" filter="url(#boxGlow)">
    <rect width="120" height="50" rx="8" fill="#fff7ed" stroke="#f97316" stroke-width="2"/>
    <text x="60" y="22" text-anchor="middle" font-family="system-ui" font-size="10" fill="#f97316" font-weight="600">PROXY POOL</text>
    <text x="60" y="38" text-anchor="middle" font-family="monospace" font-size="9" fill="#c2410c">312 healthy</text>
  </g>

  <!-- Arrow 2 -->
  <g>
    <line x1="325" y1="50" x2="365" y2="50" stroke="#64748b" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowFlow)">
      <animate attributeName="stroke-dashoffset" values="18;0" dur="1s" repeatCount="indefinite" begin="0.25s"/>
    </line>
  </g>

  <!-- Step 3: Strategy -->
  <g transform="translate(370, 25)" filter="url(#boxGlow)">
    <rect width="120" height="50" rx="8" fill="#ecfeff" stroke="#06b6d4" stroke-width="2"/>
    <text x="60" y="22" text-anchor="middle" font-family="system-ui" font-size="10" fill="#06b6d4" font-weight="600">STRATEGY</text>
    <text x="60" y="38" text-anchor="middle" font-family="monospace" font-size="9" fill="#0891b2">performance</text>
    <!-- Spinning icon -->
    <g transform="translate(100, 10)">
      <circle r="8" fill="none" stroke="#06b6d4" stroke-width="2" stroke-dasharray="20 30">
        <animateTransform attributeName="transform" type="rotate" from="0" to="360" dur="1s" repeatCount="indefinite"/>
      </circle>
    </g>
  </g>

  <!-- Arrow 3 -->
  <g>
    <line x1="495" y1="50" x2="535" y2="50" stroke="#64748b" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowFlow)">
      <animate attributeName="stroke-dashoffset" values="18;0" dur="1s" repeatCount="indefinite" begin="0.5s"/>
    </line>
  </g>

  <!-- Step 4: Rotate -->
  <g transform="translate(540, 25)" filter="url(#boxGlow)">
    <rect width="100" height="50" rx="8" fill="#f5f3ff" stroke="#8b5cf6" stroke-width="2"/>
    <text x="50" y="22" text-anchor="middle" font-family="system-ui" font-size="10" fill="#8b5cf6" font-weight="600">ROTATE</text>
    <text x="50" y="38" text-anchor="middle" font-family="monospace" font-size="9" fill="#7c3aed">185.x.x.47</text>
  </g>

  <!-- Arrow 4 -->
  <g>
    <line x1="645" y1="50" x2="685" y2="50" stroke="#64748b" stroke-width="2" stroke-dasharray="6,3" marker-end="url(#arrowFlow)">
      <animate attributeName="stroke-dashoffset" values="18;0" dur="1s" repeatCount="indefinite" begin="0.75s"/>
    </line>
  </g>

  <!-- Step 5: Response -->
  <g transform="translate(690, 25)" filter="url(#boxGlow)">
    <rect width="80" height="50" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
    <text x="40" y="22" text-anchor="middle" font-family="system-ui" font-size="10" fill="#22c55e" font-weight="600">SUCCESS</text>
    <text x="40" y="38" text-anchor="middle" font-family="monospace" font-size="9" fill="#16a34a">200 OK</text>
    <!-- Checkmark pulse -->
    <circle cx="70" cy="10" r="6" fill="#22c55e" opacity="0.3">
      <animate attributeName="r" values="6;10;6" dur="1.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.3;0;0.3" dur="1.5s" repeatCount="indefinite"/>
    </circle>
    <circle cx="70" cy="10" r="6" fill="#22c55e"/>
  </g>
</svg>
